services:
  mongodb.user.data:
    class: Drupal\mongodb_user\MongodbUserData
    arguments: ['@mongo']
  mongodb.session_manager:
    class: Drupal\mongodb_user\MongodbSessionManager
    arguments: ['@request_stack', '@mongo', '@session_manager.metadata_bag', '@session_configuration', '@session_handler']
    calls:
      - [setWriteSafeHandler, ['@session_handler.write_safe']]
  mongodb.session_handler.storage:
    class: Drupal\mongodb_user\MongodbSessionHandler
    arguments: ['@request_stack', '@mongo']
